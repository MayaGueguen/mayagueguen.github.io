<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>DIVERSITY traits : imputation</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link href="site_libs/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" />




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Maya Guéguen</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About me
  </a>
</li>
<li>
  <a href="publications.html">
    <span class="ion ion-document-text"></span>
     
    Publications
  </a>
</li>
<li>
  <a href="work.html">
    <span class="fa fa-chart-line"></span>
     
    Work
  </a>
</li>
<li>
  <a href="tutorials.html">
    <span class="fa fa-toolbox"></span>
     
    Tutorials
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:maya.gueguen@univ-grenoble-alpes.fr">
    <span class="fa fa-envelope-o"></span>
     
    Contact me
  </a>
</li>
<li>
  <a href="https://github.com/MayaGueguen">
    <span class="fa fa-github"></span>
     
    
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">DIVERSITY traits : imputation</h1>
<h4 class="date">26/10/2020</h4>

</div>


<p><br/> <br/></p>
<div id="specific-traits" class="section level1">
<h1>Specific traits</h1>
<div id="tamme-ecology" class="section level2">
<h2>2014 : Tamme (Ecology)</h2>
<p><em>Measure the predictive power of simple plant traits to estimate species’ maximum dispersal distances :</em></p>
<ul>
<li>dispersal distance is related <strong>to a dispersal syndrome</strong> (Willson 1993, Pärtel and Zobel 2007, Vittoz and Engler 2007),<br />
that may generally be deduced from seed morphology</li>
<li>but difficult to establish a direct association (Nogales et al. 2007)</li>
<li><strong>plant height</strong> is more important than seed mass in determining seed dispersal distances (Thomson et al. 2011)</li>
<li><strong>maximum dispersal distance is strongly correlated with mean dispersal distance</strong> (Thomson et al. 2011) :</li>
</ul>
<p><span class="math display">\[ log_{10}(\text{ maximumDist }) = 0.795 + 0.984 * log_{10}(\text{ meanDist })\]</span></p>
<p><br/></p>
<div style="text-align:center;">
<p><span class="math inline">\(\Rightarrow\)</span> <strong>(dispersal syndrome + growth form + terminal velocity)</strong><br />
explain <span class="math inline">\(\sim\)</span> 60<span class="math inline">\(\%\)</span> of the variation in maximum dispersal distances</p>
<p><span class="math inline">\(\Rightarrow\)</span> <strong>(dispersal syndrome + growth form)</strong><br />
explain <span class="math inline">\(\sim\)</span> 50<span class="math inline">\(\%\)</span> of the variation in maximum dispersal distances</p>
</div>
<p>with</p>
<ul>
<li>on average, maximum dispersal distances increase from :<br />

<div style="text-align:center;">
<p>wind (no special mechanisms) &lt; ballistic &lt; ant &lt; wind (special mechanisms) &lt; animal<br />
herb &lt; shrub &lt; tree</p>
</div></li>
<li>models with terminal velocity only apply to species with wind or ballistic dispersal syndrome</li>
<li>in general, overestimates for species with short-distance dispersal and underestimates for species with long-distance dispersal</li>
</ul>
<div style="text-align:center;">
<p><span class="math inline">\(\Rightarrow\)</span> <strong><code>dispeRsal</code> package</strong></p>
</div>
<p><br/><br/></p>
</div>
</div>
<div id="imputation-methods" class="section level1">
<h1>Imputation methods</h1>
<div id="schaffer" class="section level2">
<h2>1999 : Schaffer</h2>
<p>Single imputations have been shown to be accurate for datasets with small percentages of missing values.</p>
</div>
<div id="azur-mice" class="section level2">
<h2>2011 : Azur (MICE)</h2>
</div>
<div id="shan-hpmf" class="section level2">
<h2>2012 : Shan (HPMF)</h2>
</div>
<div id="schrodt-bhpmf" class="section level2">
<h2>2015 : Schrodt (BHPMF)</h2>
</div>
<div id="goolsby-rphylopars" class="section level2">
<h2>2017 : Goolsby (Rphylopars)</h2>
</div>
<div id="quartagno-jomo" class="section level2">
<h2>2019 : Quartagno (jomo)</h2>
<p><br/><br/></p>
</div>
</div>
<div id="comparison-of-methods" class="section level1">
<h1>Comparison of methods</h1>
<!-- | PAPERS | no fam | no sp | no traits (resp) | no traits (used) | no methods | missing data | evaluation | software | -->
<!-- |---------|---------|---------|---------|---------|---------|---------|---------|---------| -->
<!-- |  Tamme (2014) | 102 | 576 | 1 | 5 | + relationship | | $R^2$ | `dispeRsal` function | -->
<!-- |  Taugourdeau (2014) |  | 1054 | 9 |  | + mean <br/> + median <br/> + dissimilarity <br/> + relationship <br/> + mice | 10 prob of deletion $\in [0.01 ; 0.46]$ x 10 rep | MRdAE | 2 author's functions, `mice` pkg | -->
<!-- |  Penone (2014) |  | 273 | 4 |  | + kNN <br/> + mice <br/> + missForest <br/> + Phylopars | $10\% \rightarrow 80\%$ | - NRMSE <br/> - effect of dataset/missing data/method on errors <br/> - slope deviation | `VIM`, `mice`, `missForest` pkg, `Phylopars` soft | -->
<!-- |  Schrodt (2015) | 358 | 14320 | 13 |  | + PMF <br/> + BHMPF <br/> + aHMPF | | | -->
<!-- |  Poyatos (2018) | 4 | 13 | 5 |  | + mean and species mean <br/> + ordinary and regression kriging <br/> + kNN <br/> + mice | | | -->
<!-- |  Johnson (2020) |  | 500 <br/> (sim) | 1 | 4 | + BHMPF <br/> + Rphylopars <br/> + mice | | | -->
<!-- <br/><br/> -->
<table style="width:64%;">
<colgroup>
<col width="5%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th>PAPERS</th>
<th>Tamme (2014)</th>
<th>Taugourdeau (2014)</th>
<th>Penone (2014)</th>
<th>Schrodt (2015)</th>
<th>Poyatos (2018)</th>
<th>Johnson (2020)</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>no fam</strong></td>
<td>102</td>
<td></td>
<td></td>
<td>358</td>
<td>4</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>no sp</strong></td>
<td>576</td>
<td>1054</td>
<td>273</td>
<td>14320</td>
<td>13</td>
<td>500 (sim)</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>no traits (resp)</strong></td>
<td>1</td>
<td>9</td>
<td>4</td>
<td>13</td>
<td>5</td>
<td>1</td>
<td></td>
</tr>
<tr class="even">
<td><strong>no traits (used)</strong></td>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>4</td>
<td></td>
</tr>
<tr class="odd">
<td><strong>no methods</strong></td>
<td>+ relationship</td>
<td>+ mean <br/> + median <br/> + dissimilarity <br/> + relationship <br/> + mice</td>
<td>+ kNN <br/> + mice <br/> + missForest <br/> + Phylopars</td>
<td>+ PMF <br/> + BHMPF <br/> + aHMPF</td>
<td>+ mean and species mean <br/> + ordinary and regression kriging <br/> + kNN <br/> + mice</td>
<td>+ BHMPF <br/> + Rphylopars <br/> + mice</td>
<td></td>
</tr>
<tr class="even">
<td><strong>missing data</strong></td>
<td></td>
<td>(sim) 10 prob of deletion <span class="math inline">\(\in [0.01 ; 0.46]\)</span> x 10 rep</td>
<td>(sim) <span class="math inline">\(10\% \rightarrow 80\%\)</span> x 10 rep</td>
<td>(obs) mean/trait <span class="math inline">\(\sim 79.9\%\)</span></td>
<td>(sim) <span class="math inline">\(10\% \rightarrow 80\%\)</span> x 30 rep</td>
<td>2 resp-trait slopes x 2 cor levels x 10 rep x 4 bias types x 2 bias severity x <span class="math inline">\(5\% \rightarrow 80\%\)</span></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>evaluation</strong></td>
<td><span class="math inline">\(R^2\)</span></td>
<td>MRdAE</td>
<td>- NRMSE <br/> - effect of dataset/missing data/method on errors <br/> - slope deviation</td>
<td>- RMSE <br/> - <span class="math inline">\(R^2\)</span> <br/> - SMA regression <br/> - procrustes analysis</td>
<td>- NRMSE, KGE <br/> - correlation matrices deviation</td>
<td>- RMSE <br/> - slope deviation</td>
<td></td>
</tr>
<tr class="even">
<td><strong>software</strong></td>
<td><code>dispeRsal</code> function</td>
<td>2 author's functions, <code>mice</code> pkg</td>
<td><code>VIM</code>, <code>mice</code>, <code>missForest</code> pkg, <code>Phylopars</code> soft</td>
<td><code>MATLAB</code></td>
<td><code>automap</code>, <code>VIM</code>, <code>mice</code> pkg</td>
<td><code>BHMPF</code>, <code>Rphylopars</code>, <code>mice</code> pkg</td>
<td></td>
</tr>
</tbody>
</table>
<p><br/><br/></p>
<table style="width:62%;">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>METHODS</th>
<th>Positive points</th>
<th>Negative points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Complete-case</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Mean / species mean / median</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>kNN</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>relationship</td>
<td></td>
<td><em>Depending on the set of species used and traits available, different traits are important (Tamme 2014)</em></td>
</tr>
<tr class="odd">
<td>dissimilarity</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>BHMPF</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>(R)phylopars</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>MICE</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="taugourdeau" class="section level2">
<h2>2014 : Taugourdeau</h2>
<p><em>Effect of imputation methods on the evaluation of trait values at species level and on the subsequent calculation of functional diversity indices at community level :</em></p>
<ul>
<li>Single imputation (mathematical methods) : average / median</li>
<li>Single imputation (ecological hypotheses) : dissimilarity / relationships</li>
<li>Multiple imputation : MICE</li>
</ul>
<p><br/></p>
<div style="text-align:center;">
<p><span class="math inline">\(\Rightarrow\)</span> key parameter to choose the adequate imputation method = the distribution of the trait value in the dataset</p>
</div>
<ul>
<li><p><strong>Average method</strong> = least accurate</p></li>
<li><strong>Functional proximity between species</strong> =
<ul>
<li>best method for traits with <em>unbalanced distribution</em></li>
<li>but would not be an appropriate choice for a study on functional distance between species,<br />
as functional distance would then be underestimated</li>
<li>less affected by the percentage of deleted data (but Gower dissimilarity cannot be calculated between two species if no trait for both species, and so the correction would not be possible if missing data are too numerous)</li>
</ul></li>
<li><strong>Relationships between traits</strong> =
<ul>
<li>best method for traits with <em>balanced distribution</em></li>
<li>but the most sensitive to the level of missing data</li>
</ul></li>
</ul>
<p><span class="math inline">\(\Rightarrow\)</span> at the species level, the most accurate imputation method is NOT THE SAME for all traits and in all cases,<br />
BUT dissimilarity and/or relationships methods always the most accurate AMONG the single imputation methods</p>
<ul>
<li><strong>MICE</strong> = more accurate than all other methods for all traits except SLA
<ul>
<li>the correction model can be adapted to the distribution of the variable, but caution with unbalanced traits ??</li>
</ul></li>
</ul>
<p><br/></p>
</div>
<div id="penone" class="section level2">
<h2>2014 : Penone</h2>
<p><em>Evaluate the performance of four approaches for estimating missing values in trait databases and test whether imputed datasets retain underlying allometric relationships among traits :</em></p>
<ul>
<li>Single imputation : k-Nearest Neighbour (kNN, package <code>VIM</code>) with average / median</li>
<li>Single imputation : random forest algorithms : package <code>missForest</code></li>
<li>Single imputation : likelihood-based approach (<code>Phylopars</code>) using both phylogeny and allometric relationships among traits (phylogenetic variance-covariance matrix)</li>
<li>Multiple imputation : MICE (package <code>mice</code>) with predictive mean matching</li>
</ul>
<p>mice, missForest and Phylopars), resulted in qualitatively equivalent imputa- tion performance, and all had significantly lower errors than kNN. Adding phylogenetic information into the imputation algorithms improved estimation of missing values for all tested traits. The</p>
<p><br/></p>
</div>
<div id="schrodt" class="section level2">
<h2>2015 : Schrodt</h2>
<p><br/></p>
</div>
<div id="poyatos" class="section level2">
<h2>2018 : Poyatos</h2>
<p><br/> <br/></p>
</div>
</div>
<div id="glossary" class="section level1">
<h1>Glossary</h1>
<ul>
<li><strong>Distribution of missing data</strong> =
<ul>
<li>MCAR = missing completely at random</li>
<li>MAR = missing at random (when the presence of missing data for a given variable is related to the values of another variable)</li>
<li>MNAR = missing not at random</li>
</ul></li>
</ul>
<p><span class="math inline">\(\Rightarrow\)</span> in functional trait databases, missingness is related to the frequency of the species and their abundances, and taxonomic and phylogenetic bias is commonplace <span class="math inline">\(/!\setminus\)</span></p>
<p><br/></p>
<ul>
<li><strong>Deletion method</strong> =
<ul>
<li>delete species with missing data for the calculation of diversity indices</li>
<li>acceptable for estimation of the community-weighted mean trait value (CWM)<br />
as long as it only concerns the minor species (should not exceed 20<span class="math inline">\(\%\)</span> of the total biomass of the community)</li>
</ul></li>
</ul>
<p><br/></p>
<ul>
<li><strong>Gower + PCoA</strong> =
<ul>
<li>compute Gower distance (with missing data) and project the distance with a Principal Coordinate Analysis,<br />
the axes being then used as functional traits</li>
<li>only relevant for functional diversity indices calculated from several traits</li>
<li>trait information gets lost and only multivariate approaches can be used</li>
</ul></li>
</ul>
<p><br/></p>
<ul>
<li><strong>Imputation method</strong> = replace missing data with substituted values</li>
</ul>
<p><br/></p>
<ul>
<li><strong>Single imputation</strong> =
<ul>
<li>Replace with the mean or the median of the available trait values</li>
<li>Functional proximity between species (species with the same functional strategy have a similar set of functional traits) (Westoby et al. 2002, Diaz et al. 2004)</li>
<li>Relationships between traits (Wrigth et al. 2004, 2006)</li>
</ul></li>
<li><strong>Multiple imputation</strong> =
<ul>
<li>Monte Carlo technique in which the missing values are replaced by <span class="math inline">\(m &gt; 1\)</span> imputed values,<br />
combined to produce estimates, confidence intervals, missing data uncertainty (Nakagawa and Freckleton 2008)</li>
<li>Hierarchical probabilistic matrix factorization coupled with phylogenetic information</li>
<li>Multivariate imputation by chained equations (MICE, Azur et al. 2011)</li>
</ul></li>
</ul>
<p><br/> <br/></p>
</div>
<div id="citations" class="section level1">
<h1>Citations</h1>
<ul>
<li>Allen, B., Kon, M., Bar‐Yam, Y., Associate Editor: Ross H. Crozier, &amp; Editor: Monica A. Geber. (2009). A New Phylogenetic Diversity Measure Generalizing the Shannon Index and Its Application to Phyllostomid Bats. The American Naturalist, 174(2), 236-243. <a href="https://doi.org/10.1086/600101" class="uri">https://doi.org/10.1086/600101</a></li>
<li></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
